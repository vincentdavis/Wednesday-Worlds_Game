(function(){"use strict";var e={5338:function(e,t,n){var i=n(2856),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("nav"),t("router-view")],1)},o=[],r=n(1656),a={},c=(0,r.A)(a,s,o,!1,null,null,null),l=c.exports,d=n(1106);(0,d.k)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var u=n(1594),h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"lobby-container"},[t("h2",[e._v("Welcome to the Wednesday World Game")]),t("div",{staticClass:"input-container"},[t("label",{attrs:{for:"username"}},[e._v("Display Name:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{id:"username",placeholder:"Name"},domProps:{value:e.username},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.joinGame.apply(null,arguments)},input:function(t){t.target.composing||(e.username=t.target.value)}}})]),t("button",{on:{click:e.joinGame}},[e._v("Join Game")])])},p=[],m=(n(4114),{name:"GameLobbyComponent",data(){return{username:""}},methods:{joinGame(){this.username.trim()?(this.$router.push({name:"GameRoom",params:{username:this.username}}),this.username=""):alert("Please enter a valid username")}}}),y=m,f=(0,r.A)(y,h,p,!1,null,"8cf21d86",null),v=f.exports,w=function(){var e=this,t=e._self._c;return t("div",[e.username?t("GameWorld",{attrs:{username:e.username}}):t("div",[e._v(" "+e._s(e.$router.push({name:"Login"}))+" ")])],1)},g=[],k=function(){var e=this;e._self._c;return e._m(0)},b=[function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("div",{staticStyle:{"background-color":"black"},attrs:{id:"info"}},[e._v("Time: "),t("span",{attrs:{id:"timer"}},[e._v("0")]),e._v(" seconds")])])}],_=n(9318),x=n(8211),j=n(1301),T=n(6918),A=n(5729),E=n(7661),P=n.p+"assets/cyclist_model.caf653389a8bf1179bdd5f8ae1805776.glb",z={name:"CyclistComponent",props:["username"],data(){return{socket:null,scene:null,camera:null,renderer:null,cyclist:null,ground:null,keys:{a:{pressed:!1},d:{pressed:!1},s:{pressed:!1},w:{pressed:!1}},players:{},mixer:null,startTime:null,distanceToFinish:5e3,finished:!1}},mounted(){this.initThree(),this.initSocket(),this.animate(),this.addEventListeners()},methods:{onButtonDown(e){this.keys[e].pressed=!0},onButtonUp(e){this.keys[e].pressed=!1},initThree(){this.scene=new _.Z58,this.camera=new _.ubm(40,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.set(0,2.74,8),this.renderer=new _.JeP({alpha:!0,antialias:!0}),this.renderer.shadowMap.enabled=!0,this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement);const e=new A.N(this.camera,this.renderer.domElement);e.enableDamping=!0;const t=new x.B;t.load(P,(e=>{this.cyclist=e.scene,this.cyclist.scale.set(.5,.5,.5),this.cyclist.position.set(0,0,0),this.cyclist.rotation.y=Math.PI/2,this.cyclist.velocity={x:0,y:-.01,z:0},this.cyclist.gravity=-.002,this.mixer=new _.Iw4(this.cyclist),e.animations.forEach((e=>{this.mixer.clipAction(e).play()}));const t=new j.J;t.load("https://threejs.org/examples/fonts/helvetiker_regular.typeface.json",(e=>{const t=new T._(this.username,{font:e,size:.2,height:.02}),n=new _._4j({color:"#ff0000"}),i=new _.eaF(t,n);i.rotation.y=-Math.PI/2,i.position.set(0,3,0),this.cyclist.add(i)})),this.scene.add(this.cyclist)}));const n=new _.iNn(10,.5,500),i=new _._4j({color:"#0369a1"});this.ground=new _.eaF(n,i),this.ground.position.y=-2,this.scene.add(this.ground),this.addRoadDividers();const s=new _.ZyN(16777215,1);s.position.y=3,s.position.z=1,s.castShadow=!0,this.scene.add(s),this.scene.add(new _.$p8(16777215,.5))},initSocket(){this.socket=(0,E.io)("http://165.232.188.93:3000"),this.socket.emit("newPlayer",{username:this.username}),this.socket.on("updatePlayers",(e=>{this.updatePlayers(e)}))},addRoadDividers(){const e=new _.iNn(.2,.1,5),t=new _._4j({color:"#ffffff"});for(let n=-250;n<250;n+=10){const i=new _.eaF(e,t);i.position.set(0,-1.75,n),this.scene.add(i)}},updatePlayers(e){console.log(e);for(const t in this.players)e[t]||(this.scene.remove(this.players[t].cyclist),delete this.players[t]);for(const t in e)if(t!==this.socket.id)if(this.players[t])this.players[t].cyclist.position.set(e[t].position.x,e[t].position.y,e[t].position.z);else{const n=new x.B;n.load(P,(n=>{const i=n.scene;i.scale.set(.5,.5,.5),i.position.set(e[t].position.x,e[t].position.y,e[t].position.z),i.rotation.y=Math.PI/2,i.velocity={x:0,y:-.01,z:0},i.gravity=-.002;const s=new j.J;s.load("https://threejs.org/examples/fonts/helvetiker_regular.typeface.json",(n=>{const s=new T._(e[t].username,{font:n,size:.2,height:.02}),o=new _._4j({color:"#ffffff"}),r=new _.eaF(s,o);r.rotation.y=-Math.PI/2,r.position.set(0,3,0),i.add(r)})),this.scene.add(i),this.players[t]={cyclist:i}}))}},animate(){requestAnimationFrame(this.animate),this.camera&&this.cyclist&&(this.camera.position.x=this.cyclist.position.x,this.camera.position.z=this.cyclist.position.z+10,this.camera.lookAt(this.cyclist.position.x,this.cyclist.position.y,this.cyclist.position.z)),this.updateCyclistPosition(),this.updateTimer(),this.renderer.render(this.scene,this.camera)},updateCyclistPosition(){let e=0,t=0;this.keys.a.pressed?e=-.05:this.keys.d.pressed&&(e=.05),this.keys.s.pressed?t=.05:this.keys.w.pressed&&(t=-.05),this.cyclist&&(this.cyclist.position.x+=e,this.cyclist.position.z+=t);for(const n in this.players)n!==this.socket.id&&(this.players[n].cyclist.position.x+=e,this.players[n].cyclist.position.z+=t,this.socket.emit("move",{position:this.cyclist.position}));if(this.cyclist&&(this.distanceToFinish-=Math.abs(100*t),this.distanceToFinish<=0&&!this.finished)){this.finished=!0,console.log("Race finished!");const e=(Date.now()-this.startTime)/1e3;alert(`Finished! Time: ${e.toFixed(2)} seconds`)}},updateTimer(){this.startTime||(this.startTime=Date.now());const e=(Date.now()-this.startTime)/1e3;document.getElementById("timer").innerText=e.toFixed(2)},applyGravity(e,t){e.velocity||(e.velocity={x:0,y:-.01,z:0}),e.position.y>t.position.y+t.geometry.parameters.height/2?e.velocity.y+=e.gravity:(e.velocity.y=0,e.position.y=t.position.y+t.geometry.parameters.height/2),e.position.y+=e.velocity.y},addEventListeners(){window.addEventListener("keydown",(e=>{"a"!==e.key&&"s"!==e.key&&"d"!==e.key&&"w"!==e.key||this.onButtonDown(e.key)})),window.addEventListener("keyup",(e=>{"a"!==e.key&&"s"!==e.key&&"d"!==e.key&&"w"!==e.key||this.onButtonUp(e.key)})),window.addEventListener("resize",(()=>{this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}))}},beforeDestroy(){window.removeEventListener("keydown",this.onButtonDown),window.removeEventListener("keyup",this.onButtonUp),window.removeEventListener("resize",this.onResize),this.socket&&this.socket.disconnect()}},C=z,F=(0,r.A)(C,k,b,!1,null,null,null),O=F.exports,L={name:"GameComponent",components:{GameWorld:O},props:["username"]},N=L,S=(0,r.A)(N,w,g,!1,null,"4cd09bc9",null),G=S.exports;i.Ay.use(u.Ay);const B=[{path:"/about",name:"about",component:()=>n.e(594).then(n.bind(n,9220))},{path:"/",name:"Login",component:v},{path:"/gameRoom",name:"GameRoom",component:G,props:e=>({username:e.params.username})}],D=new u.Ay({base:"/",routes:B});var M=D,W=n(1910);i.Ay.use(W.Ay);var R=new W.Ay.Store({state:{},getters:{},mutations:{},actions:{},modules:{}});i.Ay.config.productionTip=!1,new i.Ay({router:M,store:R,render:e=>e(l)}).$mount("#app")}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,i,s,o){if(!i){var r=1/0;for(d=0;d<e.length;d++){i=e[d][0],s=e[d][1],o=e[d][2];for(var a=!0,c=0;c<i.length;c++)(!1&o||r>=o)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(a=!1,o<r&&(r=o));if(a){e.splice(d--,1);var l=s();void 0!==l&&(t=l)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[i,s,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/about.5f65c805.js"}}(),function(){n.miniCssF=function(e){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="wednesday-worlds-game:";n.l=function(i,s,o,r){if(e[i])e[i].push(s);else{var a,c;if(void 0!==o)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+o){a=u;break}}a||(c=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=i),e[i]=[s];var h=function(t,n){a.onerror=a.onload=null,clearTimeout(p);var s=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),c&&document.head.appendChild(a)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var e={524:0};n.f.j=function(t,i){var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)i.push(s[2]);else{var o=new Promise((function(n,i){s=e[t]=[n,i]}));i.push(s[2]=o);var r=n.p+n.u(t),a=new Error,c=function(i){if(n.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var o=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",a.name="ChunkLoadError",a.type=o,a.request=r,s[1](a)}};n.l(r,c,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,o,r=i[0],a=i[1],c=i[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(c)var d=c(n)}for(t&&t(i);l<r.length;l++)o=r[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},i=self["webpackChunkwednesday_worlds_game"]=self["webpackChunkwednesday_worlds_game"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[504],(function(){return n(5338)}));i=n.O(i)})();
//# sourceMappingURL=app.f0841c50.js.map